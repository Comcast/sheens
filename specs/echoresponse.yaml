name: echoresponse
doc: |-
  A demo machine that just echos HTTP responses.
patternsyntax: json
nodes:
  start:
    branching:
      type: message
      branches:
      - pattern: |
          {"request":{"url":"?url"}, "status": "?status", "body": "?body"}
        target: echo
  echo:
    action:
      interpreter: ecmascript
      source: |-
        _.out({echo: {url: _.bindings["?url"], status: _.bindings["?status"], body: _.bindings["?body"]}});
        delete _.bindings["?url"];
        delete _.bindings["?status"];
        delete _.bindings["?body"];
        return _.bindings;
    branching:
      branches:
      - target: start
